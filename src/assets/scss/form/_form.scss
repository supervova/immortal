// stylelint-disable selector-no-qualifying-type

@use 'sass:math';
@use '../abstracts' as *;

// -----------------------------------------------------------------------------
// CONTAINERS
// -----------------------------------------------------------------------------

form {
  accent-color: var(--color-ink-text-brand);
  caret-color: var(--color-ink-2ry-brand);
}

fieldset {
  border: 0;
  margin: 0;
  padding: 0;
}

// Input container
form p,
form > div:not([class]),
.e-form__control {
  position: relative;
  padding: 0;
  width: 100%;
}

form p:last-of-type {
  margin-bottom: 0;
}

.e-form__control.is-compact {
  .e-label.is-icon {
    position: absolute;
    top: var(--size-half);
    inset-inline-start: var(--size-2);
    width: var(--size-icon);
    height: var(--size-icon);
  }

  :--text-field {
    padding-inline-start: var(--size-6);
  }
}


// -----------------------------------------------------------------------------
// LEGEND AND LABELS
// -----------------------------------------------------------------------------

label,
legend {
  display: block;
}

legend {
  font-weight: 500;
  white-space: normal;
  margin: 0;
  max-width: 100%;
}

label {
  color: var(--color-ink-2ry);
  font-size: var(--font-size-label);
  line-height: var(--line-height-label);
  margin: 0;
  padding-top: var(--padding-top-label);
  padding-bottom: var(--padding-bottom-label);
  position: relative;
}

// -----------------------------------------------------------------------------
// FIELDS NORMALIZE
// -----------------------------------------------------------------------------

::-moz-focus-inner {
  border-style: none;
  padding: 0;
}

:-moz-focusring {
  outline: 0;
}

:-moz-ui-invalid {
  box-shadow: none;
}

::-ms-expand {
  display: none;
}

// -----------------------------------------------------------------------------
// INPUT, TEXTAREA, SELECT BASE
// -----------------------------------------------------------------------------

input,
optgroup,
select,
textarea {
  font-family: inherit;
  font-size: var(--font-size-label);
  line-height: var(--line-height-label);
  letter-spacing: inherit;
}

input,
select,
textarea {
  background-color: var(--color-bg-base);
  hanging-punctuation: none;
}

:--text-field,
[type='search'] {
  appearance: none;
  background-color: var(--color-bg-2ry);
  border: 0;
  color: var(--color-ink-text);
  display: block;
  padding-block: var(--padding-y-input);
  overflow: visible;
  transition:
    box-shadow var(--easing-base) var(--duration-50),
    color var(--easing-base) var(--duration-50);
  width: 100%;
  min-height: calc(var(--size-line) * 2);

  &:focus,
  &:focus-visible {
    @include state-focus;
    color: var(--color-ink-text);
    border-color: transparent;
  }

  &::placeholder {
    color: var(--color-ink-3ry);
    opacity: 1;
  }
}

:--text-field {
  border-radius: var(--border-radius-sm);
  padding-inline: var(--padding-x-input);
}

[type='password'] {
  padding-inline-end: var(--padding-x-input-lg);
}

// -----------------------------------------------------------------------------
// SPECIFIC
// -----------------------------------------------------------------------------

textarea {
  padding-top: rem(11);
  overflow: auto;
  resize: vertical;
}

textarea:not([rows]):not(.is-chat-input textarea) {
  height: calc(var(--size-line) * 6);
}

[disabled],
[readonly] {
  @include state-disabled();
}

// -----------------------------------------------------------------------------
// HINTS
// -----------------------------------------------------------------------------

form small {
  color: var(--color-ink-2ry);
  margin-top: var(--size-1);
  max-width: var(--width-readable);
  display: block;
}

.e-form__disclaimer {
  margin-block: var(--size-line);
}

// -----------------------------------------------------------------------------
// BUTTONS
// -----------------------------------------------------------------------------

.e-form__footer:not(.is-security) {
  > * {
    margin-bottom: var(--size-2);
  }

  @media (--tablet) {
    display: flex;
    align-items: center;
    padding-top: var(--padding-top-form-actions);
    padding-bottom: var(--padding-bottom-form-actions);

    > :not(:last-child) {
      margin-right: var(--size-2);
    }
  }
}

// -----------------------------------------------------------------------------
// CAPTCHA
// -----------------------------------------------------------------------------

.grecaptcha-badge {
  opacity: 0;
  pointer-events: none;
}
